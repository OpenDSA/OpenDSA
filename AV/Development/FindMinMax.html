<!DOCTYPE html>
<html lang="en">
  <head>
    <title>JSAV FindMinMax Slideshow</title>
    <link rel="stylesheet" href="../../lib/JSAV.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    <style>
    #container {
      width: 98%;
      position: relative;
    }
    .jsavcounter {
      position: absolute;
      top: 15px;
    }
    .jsavcanvas { height: 330px; }
    </style>
  </head>
  <body>
    <h1>JSAV FindMinMax Slideshow</h1>
  <div id="container">
    <div class="jsavcontrols"></div><span class="jsavcounter"></span>
    <p class="jsavoutput jsavline"></p>
    <div class="jsavcanvas"></div>
  </div>
  <style>
  </style>
    <script
       src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <script src="../../lib/jquery.transit.js"></script>
    <script src="../../lib/raphael.js"></script>
    <script src="../../lib/JSAV.js"></script>
    
    <script src="functionalListProcessing_helper.js"></script>
    
    <script>
  (function() {
    var av = new JSAV("container");
    
    //js array used for init
    var theList = [2, 6, 10, 0]; //list
    
    
    //code view for main method
    var cArray = [
    "int FindMinMax(List list, boolean findMax)",
    "{",
    "    if( isNull(list) )",
    "        return 0",
    "    else",
    "        return FindMinMaxHelper(cdr(list), findMax, car(list) )",
    "}" 
    ];
    var code = av.code(cArray);
    var highlighter = new CodeHighlighter(code,cArray.length);
    highlighter.lineHeight = 25;
    highlighter.setLabel(av,"FindMinMax Public Method");
    highlighter.advance();//first line highlighted
    
    //code view for helper method
    var cHelperArray = [
    "int FindMinMaxHelper(List list, boolean findMax, int minmax)",
    "{",
    "    if( isNull(list) )",
    "        return minmax",
    "    else if( findMax )",
    "    {",
    "        if( > car(list) minmax )",
    "           return FindMinMaxHelper(cdr(list), findMax, car(list) )",
    "        else ",
    "           return FindMinMaxHelper(cdr(list), findMax, minmax)",
    "    {",
    "    else",
    "    {",
    "        if( > minmax car(list) )",
    "           return FindMinMaxHelper(cdr(list), findMax, car(list) )",
    "        else ",
    "           return FindMinMaxHelper(cdr(list), findMax, minmax)",
    "    {",
    "}" 
    ];
    var helperCode = av.code(cHelperArray);
    
    var helperHighlighter = new CodeHighlighter(helperCode,cHelperArray.length);
    helperHighlighter.lineHeight = 21;
    helperHighlighter.setLabel(av,"FindMinMax Private Helper Method");
    
    
    
    var arrays = [
    	new ArrayObj(theList, "List", "list")
    ];
    
    var vars = [
    	new VarObj("Find maximum? (findMax)","findmax",true),
    	new VarObj("Current minimum or maximum (minmax)","minmax",0)
    ];
    
    //	console.log("[0] is undefined...");
    
    var visuals = new VisualsController(arrays,vars,av);
    visuals.visualize();
    //visuals.setVarVisibility("minmax", false);
    
    av.umsg("This slideshow will demonstrate the execution of the FindMinMax method. ",{preserve: false});
    
    // Note: av.displayInit() will not affect the number of slides.
    // All that it will do is affect what you get to see on the
    
    // initial slide.
    av.displayInit();
    
    // ------------- Slide 2 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	highlighter.moveCurrentLine(3);
	av.step();

	// ------------- Slide 3 ------------- //
	av.umsg("No, go to the else block.",{preserve: false});
	highlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 4 ------------- //
	av.umsg("Call the helper method, passing in the first element as the max value, and the cdr of the list (as the first element has already been considered). ",{preserve: false});
	highlighter.advance();
	av.step();

	// ------------- Slide 5 ------------- //
	//change array and var
	visuals.updateArray("list",[6, 10, 0]);
	visuals.updateVar("minmax",2);
	visuals.redraw();
	//
	av.umsg("Now inside the helper method.",{preserve: false});
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(1);
	av.step();
	
	// ------------- Slide 6 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 7 ------------- //
	av.umsg("No, go to else block. Is findMax true? (are we trying to find the maximum element in this list?)",{preserve: false});
	helperHighlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 8 ------------- //
	av.umsg("Yes, so enter the then block. Is the car of the list greater than our current maximum? (minMax)",{preserve: false});
	helperHighlighter.moveCurrentLine(7);
	av.step();
	
	// ------------- Slide 9 ------------- //
	av.umsg("Yes, so do a recursive call, passing in the cdr of the list, and our new maximum value. (6)",{preserve: false});
	helperHighlighter.advance();
	av.step();
	
	// ------------- Slide 10 ------------- //
	//change array and var
	visuals.updateArray("list",[10, 0]);
	visuals.updateVar("minmax",6);
	visuals.redraw();
	//
	av.umsg("Recursive call #1.",{preserve: false});
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(1);
	av.step();
	
	// ------------- Slide 11 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 12 ------------- //
	av.umsg("No, go to else block. Is findMax true? (are we trying to find the maximum element in this list?)",{preserve: false});
	helperHighlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 13 ------------- //
	av.umsg("Yes, so enter the then block. Is the car of the list greater than our current maximum? (minMax)",{preserve: false});
	helperHighlighter.moveCurrentLine(7);
	av.step();
	
	// ------------- Slide 14 ------------- //
	av.umsg("Yes, so do a recursive call, passing in the cdr of the list, and our new maximum value. (10)",{preserve: false});
	helperHighlighter.advance();
	av.step();
	
	// ------------- Slide 15 ------------- //
	//change array and var
	visuals.updateArray("list",[0]);
	visuals.updateVar("minmax",10);
	visuals.redraw();
	//
	av.umsg("Recursive call #2.",{preserve: false});
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(1);
	av.step();
	
	// ------------- Slide 16 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 17 ------------- //
	av.umsg("No, go to else block. Is findMax true? (are we trying to find the maximum element in this list?)",{preserve: false});
	helperHighlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 18 ------------- //
	av.umsg("Yes, so enter the then block. Is the car of the list greater than our current maximum? (minMax)",{preserve: false});
	helperHighlighter.moveCurrentLine(7);
	av.step();
	
	// ------------- Slide 19 ------------- //
	av.umsg("No, so do a recursive call, passing in the cdr of the list, and our currrent maximum value. (10)",{preserve: false});
	helperHighlighter.moveCurrentLine(10);
	av.step();
	
	// ------------- Slide 20 ------------- //
	//change array and var
	visuals.updateArray("list",[]);
	//visuals.updateVar("minmax",10);
	visuals.redraw();
	//
	av.umsg("Recursive call #3.",{preserve: false});
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(1);
	av.step();
	
	// ------------- Slide 21 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 22 ------------- //
	av.umsg("Yes, so just return our current maximum value (10).",{preserve: false});
	helperHighlighter.advance();
	av.step();
	
	//return up the call stack
	// ------------- Slide 23 ------------- //
	av.umsg("Return from recursive call #3.",{preserve: false});
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(10);
	helperHighlighter.highlightPrevious(7);
	av.step();
	
	// ------------- Slide 24 ------------- //
	av.umsg("Return from recursive call #2.",{preserve: false});
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(8);
	helperHighlighter.highlightPrevious(7);
	av.step();
	
	// ------------- Slide 25 ------------- //
	av.umsg("Return from recursive call #1.",{preserve: false});
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(8);
	helperHighlighter.highlightPrevious(7);
	av.step();
	
	// ------------- Slide 26 ------------- //
	av.umsg("Return from helper method call.",{preserve: false});
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(8);
	helperHighlighter.highlightPrevious(7);
	av.step();
	
	// ------------- Slide 25 ------------- //
	av.umsg("Return from main FindMinMax method call.",{preserve: false});
	helperHighlighter.reset();
	
	av.step();
    //done with av, record av actions
    av.recorded();
    
    
}());
    </script>
  </body>
</html>
